<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-drafts/vc-decentralized-status">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Verifiable Credentials Decentralized Status | boruta</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://malach-it.github.io/developers.boruta/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://malach-it.github.io/developers.boruta/img/logo.png"><meta data-rh="true" property="og:url" content="https://malach-it.github.io/developers.boruta/docs/drafts/vc-decentralized-status"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Verifiable Credentials Decentralized Status | boruta"><meta data-rh="true" name="description" content="Abstract"><meta data-rh="true" property="og:description" content="Abstract"><link data-rh="true" rel="icon" href="/developers.boruta/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://malach-it.github.io/developers.boruta/docs/drafts/vc-decentralized-status"><link data-rh="true" rel="alternate" href="https://malach-it.github.io/developers.boruta/docs/drafts/vc-decentralized-status" hreflang="en"><link data-rh="true" rel="alternate" href="https://malach-it.github.io/developers.boruta/docs/drafts/vc-decentralized-status" hreflang="x-default"><link rel="stylesheet" href="/developers.boruta/assets/css/styles.7c335e06.css">
<link rel="preload" href="/developers.boruta/assets/js/runtime~main.dabd5a7c.js" as="script">
<link rel="preload" href="/developers.boruta/assets/js/main.3ca2f4af.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/developers.boruta/"><div class="navbar__logo"><img src="/developers.boruta/img/logo.png" alt="boruta logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/developers.boruta/img/logo.png" alt="boruta logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/developers.boruta/docs/intro">Home</a><a class="navbar__item navbar__link" href="/developers.boruta/api">API documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/malach-it/boruta-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers.boruta/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers.boruta/docs/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers.boruta/docs/credential-issuance">Credentials issuance flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers.boruta/docs/credentials-presentation">Credentials presentation flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/developers.boruta/docs/provider-configuration/configure-clients">Provider configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/developers.boruta/docs/drafts/vc-decentralized-status">Drafts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/developers.boruta/docs/drafts/vc-decentralized-status">VC decentralized status</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/developers.boruta/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Drafts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">VC decentralized status</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Verifiable Credentials Decentralized Status</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>Credentials give information about a subject that helps in its recognition by a third party, usually to provide a service or state an assertion given its traits. The verification of credentials needs additional information to assert the validity of the information contained in it. This specification provides a way to store verifiable credential status and verify it in a decentralized context. The architecture enables the verifiable credential holders to store derived status information that can only be resolved by the issuer without prior centralized storage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="status-of-the-document">Status of the document<a href="#status-of-the-document" class="hash-link" aria-label="Direct link to Status of the document" title="Direct link to Status of the document">​</a></h2><p>This document is a working draft of a possible specification.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2><p>As stated the status adds information to verifiable credentials to assert credential validity. That piece of information annotates data, the closer it is to the actual information it denotes, the less there are possibilities of uncoupling of the data and its status. Providing a way to store both information at the same place gives a way to provide that proximity. The decentralized way of seeing status storage differ from actual status list specifications since it requires no centralized storage for statuses which makes them faster to resolve and then better scales with the projected number of emitted verifiable credentials. It also makes other tradeoffs about privacy (see 6. Privacy considerations) staying reasonable with those concerns. This specification is open to contributions to better solve the status issue deepening further the work on revocation which is still ongoing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-introduction">1. Introduction<a href="#1-introduction" class="hash-link" aria-label="Direct link to 1. Introduction" title="Direct link to 1. Introduction">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-specifications">1.1 Specifications<a href="#11-specifications" class="hash-link" aria-label="Direct link to 1.1 Specifications" title="Direct link to 1.1 Specifications">​</a></h3><ul><li>HOTP</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-data-model">2. Data Model<a href="#2-data-model" class="hash-link" aria-label="Direct link to 2. Data Model" title="Direct link to 2. Data Model">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-status-tokens">2.1 Status Tokens<a href="#21-status-tokens" class="hash-link" aria-label="Direct link to 2.1 Status Tokens" title="Direct link to 2.1 Status Tokens">​</a></h3><p>Status tokens are the major components of this specification. They enable holders to store the status information without disclosing it, making the status only resolvable by the issuer. Those tokens are made of two parts: the first contains encoded information that helps resolve the second part. The latter contains a status cryptographic derivation.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/malach-it/vc-decentralized-status/main/images/sotp.png" alt="token anatomy" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-example">2.2 Example<a href="#22-example" class="hash-link" aria-label="Direct link to 2.2 Example" title="Direct link to 2.2 Example">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BiwBG3EYQhLDjAMA~2f0f96b9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-status-information">2.2 Status information<a href="#22-status-information" class="hash-link" aria-label="Direct link to 2.2 Status information" title="Direct link to 2.2 Status information">​</a></h3><p>The status information, as the first part of status tokens, is encoded to store a low-weighted payload that contains the iat and the status token time to live. It helps to resolve the status contained in the derived token. Not being part of token verification algorithm, this part contains information about when the token was issued. The contained information is stored in a binary format and URL-safe base 64 encoded.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;iat&gt;{4}&lt;binary encode Time To Live&gt;{4}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The iat may be 7 bytes long and binary encoded. The time to live may also be padded binary encoded integer to save storage. Those parts may be concatenated to form the status information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-derived-status">2.1 Derived Status<a href="#21-derived-status" class="hash-link" aria-label="Direct link to 2.1 Derived Status" title="Direct link to 2.1 Derived Status">​</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/malach-it/vc-decentralized-status/main/images/non-opaque-salt.png" alt="Status derivation" class="img_ev3q"></p><p>Using the HOTP algorithm with a secret kept by the issuer and a counter made of Unix timestamp and status shift, we can derive the status but keep also the expiry information in the same token. Noticing that the shift preserves the validity range size, the next checks within the expiration time will succeed by providing the same shift. Also, the more you take HOTP HMAC value bytes, the more the token will fail to collide improving the entropy of the derivation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-implementation">4. Implementation<a href="#4-implementation" class="hash-link" aria-label="Direct link to 4. Implementation" title="Direct link to 4. Implementation">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-crafting-a-verifiable-credential-status-token">4.1 Crafting a verifiable credential status token<a href="#41-crafting-a-verifiable-credential-status-token" class="hash-link" aria-label="Direct link to 4.1 Crafting a verifiable credential status token" title="Direct link to 4.1 Crafting a verifiable credential status token">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@status_table = [ status: string ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shift(status: string): int {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BINARY_DECODE_UNSIGNED(status)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generate_status_token(secret: string, ttl: int, status: string): int {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  iat = BINARY_ENCODE(NOW(:microsecond)) # 7 bytes long</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  time_to_live = PAD_LEFT(BINARY_ENCODE(ttl), 4) # 4 bytes long</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token_info = BASE64_ENCODE(iat + time_to_live)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  derived_status = HTOP(secret, DIV(NOW(:second), ttl) + shift(status))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &quot;&lt;token_info&gt;~&lt;derived_status&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-resolving-a-verifiable-credential-status-token">4.2 Resolving a verifiable credential status token<a href="#42-resolving-a-verifiable-credential-status-token" class="hash-link" aria-label="Direct link to 4.2 Resolving a verifiable credential status token" title="Direct link to 4.2 Resolving a verifiable credential status token">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@status_table = [ status: string ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shift(status: string): int {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BINARY_DECODE_UNSIGNED(BINARY_ENCODE(status))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">decode_token_info(token_info: string): hashtable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  result = REDUCE(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BYTES(token_info),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { iat =&gt; 0, ttl =&gt; 0, memory =&gt; [] },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lambda (byte, index), acc:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CASE index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      WHEN index == 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PUSH(acc[memory], byte)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        acc[iat] = BINARY_DECODE(acc[memory])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RESET(acc[memory])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return acc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      WHEN index == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PUSH(acc[memory], byte)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        acc[ttl] = BINARY_DECODE(acc[memory])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RESET(acc[memory])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return acc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ELSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PUSH(acc[memory], byte)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return acc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DELETE result[memory]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resolve_status_token(secret: string, status_token: string): string {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [token_info, derived_status] = SPLIT(status_token, &#x27;~&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info = decode_token_info(BASE64_DECODE(token_info))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  statuses = CLONE(@status_table)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  result = &#x27;invalid&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  while status = POP(statuses):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if HOTP(secret, DIV(NOW(:second), info[ttl]) + shift(status)) == derived_status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-example-implementation">4.3 Example implementation<a href="#43-example-implementation" class="hash-link" aria-label="Direct link to 4.3 Example implementation" title="Direct link to 4.3 Example implementation">​</a></h3><p>You can find an example implementation <a href="https://hexdocs.pm/boruta_ssi/0.1.0-beta.1/Boruta.VerifiableCredentials.Status.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-privacy-considerations">5. Privacy Considerations<a href="#5-privacy-considerations" class="hash-link" aria-label="Direct link to 5. Privacy Considerations" title="Direct link to 5. Privacy Considerations">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-decentralized-architecture">5.1 Decentralized Architecture<a href="#51-decentralized-architecture" class="hash-link" aria-label="Direct link to 5.1 Decentralized Architecture" title="Direct link to 5.1 Decentralized Architecture">​</a></h3><p>Status tokens are self-contained but only resolvable by the issuer which owns a secret component, the decentralized architecture gives a way to have low-weighted storage points. To state the validity of verifiable credentials and keep the holder&#x27;s privacy, verifiers can resolve the status of the presented credentials without disclosing the data contained in it to the issuer in any manner. Mitigated by the fact that Time To Live information can give hints about the type of credential resolved.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-status-table">5.2 Status table<a href="#52-status-table" class="hash-link" aria-label="Direct link to 5.2 Status table" title="Direct link to 5.2 Status table">​</a></h3><p>The status table represents the list of possible statuses that are encoded into a shift integer for lowering to a tiny list the issuer needed storage. The status list may be standardized globally or issuer-wide for the issuer emitted set of credentials to lower the verifiable credentials type disclosability. The status token being part of a credential and including a time to live, a way to check if statuses are hidden is to resolve it against a given status table whether the status token is valid to ensure a status is found. Otherwise, a hidden status has been set by the issuer. This check can be performed with a past timestamp, then, once issued there will always be a way to check if the status of a token has been hidden provided an issuer secret. Statuses may help categorize the annotated data. In order to do so, the element of the status table may be part of the same category.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-granularity">5.3 Granularity<a href="#53-granularity" class="hash-link" aria-label="Direct link to 5.3 Granularity" title="Direct link to 5.3 Granularity">​</a></h3><p>Some verifiable credential formats support selective disclosure enabling to share part of the data contained in the verifiable credential payload without disclosing the remaining part. Status tokens can reference individual information or a set of disclosures. Taking the example of <a href="https://www.ietf.org/archive/id/draft-ietf-oauth-selective-disclosure-jwt-09.html" target="_blank" rel="noopener noreferrer">Selective Disclosure for JWTs</a>, the status token can replace the suggested opaque salt to include the status information of the associated disclosure. The decentralization architecture of this suggested specification makes the status storage to be handled by the holders helping to reduce the weight of single-place storage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-annotation">5.4 Annotation<a href="#54-annotation" class="hash-link" aria-label="Direct link to 5.4 Annotation" title="Direct link to 5.4 Annotation">​</a></h3><p>By definition a status is an annotation on the data it denotes. Following this specification, the issuer is not limited for the statuses it set which may include statuses the holder may not be aware of. While this information is not disclosable, the issuer can hide statuses from the holder and the verifier which gives the ability to track them on verfication. When the verifier contacts the issuer to get the status, the latter has the ability to track the remote ip of the verifier making then the usage of the custom statuses trackable. This issue may be mitigated by reducing the possible statuses which may not be possible with the suggested algorithms or by making the status publicly readable for both the holder and the verifier.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="55-issuer-trust">5.5 Issuer trust<a href="#55-issuer-trust" class="hash-link" aria-label="Direct link to 5.5 Issuer trust" title="Direct link to 5.5 Issuer trust">​</a></h3><p>Status tokens are emitted by the issuer of the backed-up data. This issuer is the trust anchor of both the data and the status being the single source of truth of those information. The verifier is to trust the issuer providing a factor of trust for the holder delivered information. Here the suggested framework gives the ability to have that trust chain by directly resolving the status requesting the issuer which creates a direct link between both parties. That enforces trust through the DID document and the SSL abilities of the issuer domain, being again a single source of truth for trust of the data and the status giving all the required insurance to provide a service for the verifier. The link between the issuer and the verifier for trust is not herein anonymous, failing the privacy of the issuer but keeping the holder one which is the most important factor of decentralized identity beyond trust.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-about-revocation">6. About revocation<a href="#6-about-revocation" class="hash-link" aria-label="Direct link to 6. About revocation" title="Direct link to 6. About revocation">​</a></h2><p>Considering the status as an annotation and that annotations prove the data and the data proves the annotations, seeing them as paradoxes, it is not possible to see revocation within the proposed framework for statuses. It would enforce to break one of the before statements proving the annotation is false and not yet to be considered. Then the revocation subject is quite an important subject to fix impairments. Those contain the identity information itself as a component and corrective actions in the annotation would fail the privacy brought by the decentralized identity concepts enforcing both the holder and the verifier to disclose identity information to the issuer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-going-further-status-chains">7. Going further, status chains<a href="#7-going-further-status-chains" class="hash-link" aria-label="Direct link to 7. Going further, status chains" title="Direct link to 7. Going further, status chains">​</a></h2><p>It would be possible to store a list of statuses composing the status tokens one with the other. Composing the status tokens would result to a merkle tree. This would permit for an issuer to emit more than a single status but a list. The hash of HOTP values are to be taken at a single point of time providing the same hash format for all the emitted tokens. The verification would be made by rebuilding the composed tree, one status after the other keeping the same category building a merkle tree from result to result. The composition law for the given status tokens help to store more data staying in the same category.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/malach-it/vc-decentralized-status/main/images/status-chains.png" alt="Status chains" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-choosing-a-status-among-the-chain">7.1 Choosing a status among the chain<a href="#71-choosing-a-status-among-the-chain" class="hash-link" aria-label="Direct link to 7.1 Choosing a status among the chain" title="Direct link to 7.1 Choosing a status among the chain">​</a></h3><p>Apart from a single status token, the corresponding status list can be derived using a composition law, the status being a choice among the given list. This would enforce the issuer to provide the status list state at token emission. The pattern would not enforce the issuer to include the list associated to the token, but the contracted list must contain the status given by the associated token to provide the validity of the couple list / choice. Further discussions can be made for having choices that do not influence the resulting status token which is at first sight not possible with modern computing.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/malach-it/vc-decentralized-status/main/images/chosing-a-status-among-a-list.png" alt="Couple list / choice" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-public-statuses">7.2 Public statuses<a href="#72-public-statuses" class="hash-link" aria-label="Direct link to 7.2 Public statuses" title="Direct link to 7.2 Public statuses">​</a></h3><p>An other way to see status would be to include the status list in the chain and publicly expose those statuses and the status list derivation, that would help to prevent from the hidden statuses issue. Then status tokens would be publicly solvable, the token being private. An example would be to have the statuses given, namely &quot;valid&quot;, &quot;suspended&quot;, &quot;revoked&quot; and have the signing did as secret.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-choosing-multiple-statuses">7.3 Choosing multiple statuses<a href="#73-choosing-multiple-statuses" class="hash-link" aria-label="Direct link to 7.3 Choosing multiple statuses" title="Direct link to 7.3 Choosing multiple statuses">​</a></h3><p>Using a binary sum as composition law, multiple statuses can be choosen from the given list. Giving them in their textual form along with the remaining sum of the other status tokens help to prove the statuses are part of the associated status list. This would also fix the hidden statuses issue. Computing the chosen status tokens sum and adding it to the rest results to the status list token. This would be a way to enable selective disclosure. It helps to selectively disclose status information without disclosing the number of statuses included in the token. Metaphoring the statuses as the verbal communication and the remaining sum as the non-verbal one.</p><p><img loading="lazy" src="https://raw.githubusercontent.com/malach-it/vc-decentralized-status/main/images/choosing-multiple-statuses.png" alt="Status sum" class="img_ev3q"></p><p>If the status list forms a coherent set, some disclosed subsets of that list can give meaningful information by themselves, choosing such a set would express information about the annotated data itself. That ability of such choice should be inherent to the coherence of the list and is not covered by this draft. It is probable that in modern computing only human can perform this.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/malach-it/developers.boruta/tree/master/docs/drafts/vc-decentralized-status.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/developers.boruta/docs/provider-configuration/configure-upstreams"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upstreams configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a></li><li><a href="#status-of-the-document" class="table-of-contents__link toc-highlight">Status of the document</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#1-introduction" class="table-of-contents__link toc-highlight">1. Introduction</a><ul><li><a href="#11-specifications" class="table-of-contents__link toc-highlight">1.1 Specifications</a></li></ul></li><li><a href="#2-data-model" class="table-of-contents__link toc-highlight">2. Data Model</a><ul><li><a href="#21-status-tokens" class="table-of-contents__link toc-highlight">2.1 Status Tokens</a></li><li><a href="#22-status-information" class="table-of-contents__link toc-highlight">2.2 Status information</a></li><li><a href="#21-derived-status" class="table-of-contents__link toc-highlight">2.1 Derived Status</a></li></ul></li><li><a href="#4-implementation" class="table-of-contents__link toc-highlight">4. Implementation</a><ul><li><a href="#41-crafting-a-verifiable-credential-status-token" class="table-of-contents__link toc-highlight">4.1 Crafting a verifiable credential status token</a></li><li><a href="#42-resolving-a-verifiable-credential-status-token" class="table-of-contents__link toc-highlight">4.2 Resolving a verifiable credential status token</a></li><li><a href="#43-example-implementation" class="table-of-contents__link toc-highlight">4.3 Example implementation</a></li></ul></li><li><a href="#5-privacy-considerations" class="table-of-contents__link toc-highlight">5. Privacy Considerations</a><ul><li><a href="#51-decentralized-architecture" class="table-of-contents__link toc-highlight">5.1 Decentralized Architecture</a></li><li><a href="#52-status-table" class="table-of-contents__link toc-highlight">5.2 Status table</a></li><li><a href="#53-granularity" class="table-of-contents__link toc-highlight">5.3 Granularity</a></li><li><a href="#54-annotation" class="table-of-contents__link toc-highlight">5.4 Annotation</a></li><li><a href="#55-issuer-trust" class="table-of-contents__link toc-highlight">5.5 Issuer trust</a></li></ul></li><li><a href="#6-about-revocation" class="table-of-contents__link toc-highlight">6. About revocation</a></li><li><a href="#7-going-further-status-chains" class="table-of-contents__link toc-highlight">7. Going further, status chains</a><ul><li><a href="#71-choosing-a-status-among-the-chain" class="table-of-contents__link toc-highlight">7.1 Choosing a status among the chain</a></li><li><a href="#72-public-statuses" class="table-of-contents__link toc-highlight">7.2 Public statuses</a></li><li><a href="#73-choosing-multiple-statuses" class="table-of-contents__link toc-highlight">7.3 Choosing multiple statuses</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/developers.boruta/docs/intro">introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Powered by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://io.malach.it" target="_blank" rel="noopener noreferrer" class="footer__link-item">malachit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/malach-it/boruta-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 malachit. Built with Docusaurus.</div></div></div></footer></div>
<script src="/developers.boruta/assets/js/runtime~main.dabd5a7c.js"></script>
<script src="/developers.boruta/assets/js/main.3ca2f4af.js"></script>
</body>
</html>